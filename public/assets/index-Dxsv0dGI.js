import{u as A,r as u,j as e,a as w,s as E,t as I,F as B,T as P,b as _,B as L,S as f,E as q,G as J,w as K,A as N,x as Q}from"./index-DVvFS-R-.js";import{C as X}from"./index-UmG2552m.js";import{u as F}from"./index-DghdA3Pu.js";import{u as D,C as Y,U as Z}from"./accounts-stats-C93SywfC.js";import{D as $,S as ee,C as se,a as te,E as re,M as O,b as T,c as k,d as z,e as H}from"./chunk-7YYN6TNS-9xXlXI3A.js";import{S as ne,C as ce,a as U}from"./chunk-3RSXBRAN-DUm79cNC.js";import{H as oe}from"./chunk-7OLJDQMT-CnZmxAFp.js";import{B as ae}from"./chunk-Z6RXEUPO-BoTXJ3jW.js";import{u as V,o as G,F as y,a as b,I as R,b as M}from"./yup-C3ho1aqJ.js";const ie=({account:t})=>{const{deleteAccount:s}=F(),{t:n}=A(),[o,c]=u.useState(!1),r=async()=>{c(!0),await s(t),c(!1)};return e.jsx(w,{onClick:r,colorScheme:"red",isLoading:o,loadingText:n("crud.buttons.deleteButtonLoadingText"),children:e.jsx($,{})})},le=E(({setAccount:t,onOpen:s})=>{const{accounts:n,getAccounts:o}=F(),[c,r]=u.useState(!1);return u.useEffect(()=>{(async()=>(r(!0),await o(),r(!1)))()},[]),c?e.jsx(I,{}):e.jsx(B,{direction:"column",gap:4,children:e.jsx(ee,{columns:{base:1,sm:2,lg:3,xl:4},spacing:"20px",children:n.map(a=>e.jsx(de,{account:a,onOpen:s,setAccount:t},a.id))})})}),de=({setAccount:t,account:s,onOpen:n})=>{const o=()=>{t(s),n()};return e.jsx(ne,{initialScale:.9,in:!0,children:e.jsxs(ce,{borderColor:"red",children:[e.jsx(se,{children:e.jsxs(oe,{size:"sm",as:B,gap:2,align:"center",justifyContent:"space-between",children:[e.jsx(P,{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",children:s.title}),e.jsx(ae,{fontSize:"0.7em",colorScheme:"green",px:2,py:1,children:s.currency.code})]})}),e.jsxs(te,{gap:5,children:[e.jsx(w,{onClick:o,children:e.jsx(re,{})}),e.jsx(ie,{account:s})]})]})})},ue=E(({isOpen:t,onClose:s})=>{var C,p,h,m;const{currencies:n,getCurrencies:o}=D(),{t:c,i18n:r}=A(),{colorMode:a}=_(),{register:l,handleSubmit:x,reset:g,formState:{errors:i,isValid:d}}=V({resolver:G(q)});return u.useEffect(()=>{(async()=>await o())()},[]),e.jsxs(O,{isOpen:t,onClose:s,isCentered:!0,size:"sm",children:[e.jsx(T,{}),e.jsxs(k,{maxW:{base:"calc(100% - 32px)",sm:400},children:[e.jsx(z,{pt:5,px:5,pb:0,children:c("pages.accounts.createModal.form.title")}),e.jsx(H,{top:5,right:5}),e.jsx(B,{direction:"column",gap:4,children:e.jsx(L,{rounded:"lg",bg:a==="light"?"gray.50":"gray.700",boxShadow:"lg",p:5,children:e.jsxs(f,{spacing:4,children:[e.jsxs(y,{isInvalid:!!((C=i.title)!=null&&C.message),children:[e.jsxs(b,{children:[c("pages.accounts.createModal.form.fields.title"),":"]}),e.jsx(R,{...l("title"),type:"text",focusBorderColor:a==="light"?"green.500":"green.200",placeholder:c("pages.accounts.createModal.form.placeholders.title")}),i.title&&e.jsx(M,{children:(p=i.title)==null?void 0:p.message})]}),e.jsxs(y,{isInvalid:!!((h=i.currency_id)!=null&&h.message),children:[e.jsxs(b,{children:[c("pages.accounts.createModal.form.fields.currency"),":"]}),e.jsx(U,{...l("currency_id"),focusBorderColor:a==="light"?"green.500":"green.200",children:n.map(({id:j,code:S,title:v})=>e.jsx("option",{value:j,children:r.language==="ru"?v:S},j))}),i.currency_id&&e.jsx(M,{children:(m=i.currency_id)==null?void 0:m.message})]}),e.jsx(f,{spacing:10,pt:2,children:e.jsx(Y,{reset:g,isValid:d,handleSubmit:x,onSubmit:s})})]})})})]})]})}),xe=E(({account:t,isOpen:s,onClose:n})=>{var p,h,m,j;const{currencies:o,getCurrencies:c}=D(),{t:r,i18n:a}=A(),{colorMode:l}=_(),{register:x,handleSubmit:g,reset:i,formState:{errors:d,isValid:C}}=V({resolver:G(J),defaultValues:{title:t.title,currency_id:t.currency.id}});return u.useEffect(()=>{(async()=>await c())()},[]),e.jsxs(O,{isOpen:s,onClose:n,isCentered:!0,size:"sm",children:[e.jsx(T,{}),e.jsxs(k,{maxW:{base:"calc(100% - 32px)",sm:400},children:[e.jsx(z,{pt:5,px:5,pb:0,children:r("pages.accounts.editModal.form.title")}),e.jsx(H,{top:5,right:5}),e.jsx(B,{direction:"column",gap:4,children:e.jsx(L,{rounded:"lg",bg:l==="light"?"gray.50":"gray.700",boxShadow:"lg",p:5,children:e.jsxs(f,{spacing:4,children:[e.jsxs(y,{isInvalid:!!((p=d.title)!=null&&p.message),children:[e.jsxs(b,{children:[r("pages.accounts.editModal.form.fields.title"),":"]}),e.jsx(R,{...x("title"),type:"text",focusBorderColor:l==="light"?"green.500":"green.200",placeholder:r("pages.accounts.editModal.form.placeholders.title")}),d.title&&e.jsx(M,{children:(h=d.title)==null?void 0:h.message})]}),e.jsxs(y,{isInvalid:!!((m=d.currency_id)!=null&&m.message),children:[e.jsxs(b,{children:[r("pages.accounts.editModal.form.fields.currency"),":"]}),e.jsx(U,{...x("currency_id"),focusBorderColor:l==="light"?"green.500":"green.200",children:o.map(({id:S,code:v,title:W})=>e.jsx("option",{value:S,children:a.language==="ru"?W:v},S))}),d.currency_id&&e.jsx(M,{children:(j=d.currency_id)==null?void 0:j.message})]}),e.jsx(f,{spacing:10,pt:2,children:e.jsx(Z,{id:t.id,reset:i,isValid:C,handleSubmit:g,onSubmit:n})})]})})})]})]})});function be(){const{t}=A(),[s,n]=u.useState(null),{accounts:o,getAccounts:c}=F(),{isOpen:r,onOpen:a,onClose:l}=K(),[x,g]=u.useState(!1),i=()=>{l(),n(null)};return u.useEffect(()=>{(async()=>(g(!0),await c(),g(!1)))()},[]),x?e.jsx(I,{}):e.jsx(X,{children:e.jsxs(f,{pt:2,gap:6,children:[!o.length&&e.jsxs(N,{borderRadius:"md",status:"info",children:[e.jsx(Q,{}),t("advices.createAccountAdvice")]}),e.jsx(w,{onClick:a,children:t("crud.buttons.createButton")}),e.jsx(ue,{isOpen:r&&!s,onClose:l}),s&&e.jsx(xe,{account:s,isOpen:r,onClose:i}),e.jsx(le,{onOpen:a,setAccount:n})]})})}export{be as default};
